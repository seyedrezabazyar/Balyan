<?php

namespace App\Http\Controllers\Auth;

use App\Http\Controllers\Controller;
use App\Models\User;
use App\Traits\AuthSessionTrait;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Log;

class RegistrationController extends Controller
{
    use AuthSessionTrait;

    /**
     * ایجاد کاربر جدید
     *
     * @param string $identifier
     * @param string $identifierType
     * @return User
     */
    public function createUser($identifier, $identifierType)
    {
        Log::info('Creating new user', [
            'identifier' => $identifier,
            'identifierType' => $identifierType
        ]);

        $userData = [
            $identifierType => $identifier,
            'name' => null,
            'email_verified_at' => $identifierType === 'email' ? now() : null,
            'phone_verified_at' => $identifierType === 'phone' ? now() : null,
        ];

        return User::create($userData);
    }
}
